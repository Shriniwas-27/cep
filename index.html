<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VidyÄlaya Learning Resource Center â€“ Dashboard</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/particles.js"></script>

<style>
#particles-js {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: -1;
  background: linear-gradient(to bottom right, #004aad, #00b7ff);
}

/* BRAND HEADER */
.brand-header {
  margin: 0 auto;
  width: 100%;
  text-align: center;
  padding: 14px 0;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,0.25);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.brand-title {
  font-size: 1.7rem;
  font-weight: 800;
  background: linear-gradient(90deg, #ffffff, #d9efff, #ffffff);
  -webkit-background-clip: text;
  color: transparent;
  letter-spacing: 1px;
  text-shadow: 0px 0px 6px rgba(255,255,255,0.4);
}

.brand-tagline {
  font-size: 0.82rem;
  color: #eef6ff;
  opacity: 0.9;
  margin-top: 2px;
}

/* MOTIVATION + NEWS CARD UI */
.cards-section { margin-top: 26px; }
.news-grid, .motivation-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 12px;
  margin-top: 10px;
}
.news-card, .motivation-card {
  background: rgba(255,255,255,0.92);
  color:#0f172a;
  padding: 14px;
  border-radius: 14px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  transition:.25s ease;
}
.news-card:hover, .motivation-card:hover {
  transform:translateY(-4px);
  background:#0f172a;
  color:white;
}
.logout-btn {
  margin-top: 20px;
  width: 100%;
  padding: 12px;
  background: #ff4d4d;
  color: white;
  font-weight: 600;
  border: none;
  border-radius: 10px;
  cursor: pointer;
}

.logout-btn:hover {
  background: #ff0000;
}

</style>
</head>

<body>
  <div id="particles-js"></div>

<!-- BRAND HEADER -->
<div class="brand-header">
  <h1 class="brand-title">VidyÄlaya Learning Resource Center</h1>
  <p class="brand-tagline">One stop platform for smart engineering resources ğŸš€</p>
</div>

<div class="container">

    <!-- SIDEBAR -->
    <aside class="sidebar">
    <div class="profile-section">
        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" id="profileImage" class="profile-img">
        <h2 id="profileName">Loading...</h2>
        <p id="profileCourse">Loading info...</p>
        <p id="profileEmail">Loading email...</p>
    </div>

    <nav class="sidebar-menu">
        <button class="menu-btn" onclick="location.href='index.html'">ğŸ“Š Dashboard</button>
        <button class="menu-btn" onclick="location.href='notes.html'">ğŸ“˜ Notes</button>
        <button class="menu-btn" onclick="location.href='courses.html'">ğŸ“š Courses</button>
        <button class="menu-btn" onclick="location.href='placement.html'">ğŸ¯ Placement</button>
        <button class="menu-btn" onclick="location.href='pyq.html'">ğŸ“„ PYQ</button>
        <button class="menu-btn" onclick="location.href='videos.html'">ğŸ¥ Video Resources</button>
        <button class="menu-btn" onclick="location.href='profile.html'">âš™ Profile Settings</button>

        <!-- âœ” KEEP THIS ONE -->
        <button id="logoutBtn" class="logout-btn">Logout</button>
    </nav>
</aside>


    <!-- MAIN CONTENT -->
    <main class="main-content">

  <div class="welcome-card">
    <h1>Welcome, <span id="profileNameDash">Student</span> ğŸ‘‹</h1>
    <p id="quote">â€œSuccess is the sum of small efforts repeated daily.â€</p>
  </div>

  <section class="companies-section">
    <h2>ğŸš€ Top Companies Hiring with High Packages</h2>

<div class="branch-tabs">
  <button class="branch-btn active" data-branch="cse">CSE</button>
  <button class="branch-btn" data-branch="entc">ENTC</button>
  <button class="branch-btn" data-branch="mech">Mechanical</button>
  <button class="branch-btn" data-branch="civil">Civil</button>
</div>

<div id="companyGrid" class="company-grid"></div>
  </section>


<!-- ğŸŸ¦ MOTIVATION CARDS -->
<section class="cards-section">
  <h2>ğŸ’¡ Motivation for Students</h2>
  <div class="motivation-grid">
    <div class="motivation-card">â€œDreams donâ€™t work unless you do.â€</div>
    <div class="motivation-card">â€œSmall progress each day leads to big results.â€</div>
    <div class="motivation-card">â€œYour future is created by what you do today.â€</div>
    <div class="motivation-card">â€œFocus, Discipline, Consistency â€” Keys for success!â€</div>
  </div>
</section>

<!-- ğŸ“° NEWS CARD SECTION -->
<!-- NEWS SECTION -->
<section class="news-section">
  <h2>ğŸ“° Latest Engineering & Tech News</h2>
  <div class="news-grid">

    <a href="https://www.indiatoday.in/education-today/news" target="_blank" class="news-card">
      <p>AICTE introduces new curriculum to boost industry-ready skills</p>
    </a>

    <a href="https://www.thehindu.com/sci-tech/technology/" target="_blank" class="news-card">
      <p>ISRO announces internship program & student research opportunities</p>
    </a>

    <a href="https://www.moneycontrol.com/news/technology/" target="_blank" class="news-card">
      <p>India becomes 3rd largest startup hub globally â€” Tech hiring increases</p>
    </a>

    <a href="https://techcrunch.com/" target="_blank" class="news-card">
      <p>Google launches Gemini: next-gen AI model powering futuristic apps</p>
    </a>

  </div>
</section>


</main>

</div>

<!-- user profile & company scripts & particles remain unchanged below -->


<!-- USER PROFILE SCRIPT -->
<!-- USER PROFILE SCRIPT -->
<script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

const supabase = createClient(
  "https://byrqewqijxzbksbeavzl.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ5cnFld3Fpanh6YmtzYmVhdnpsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMDk3OTAsImV4cCI6MjA3ODc4NTc5MH0.tIso8wmZWF1MyZm17imeHrGZXv0smuNaGWYkWycKdsw"
);

// ================== LOAD USER PROFILE ==================
async function loadUserProfile() {
  try {
    const { data: { user }} = await supabase.auth.getUser();
    if (!user) {
      window.location.href = "auth.html"; // redirect if not logged in
      return;
    }

    const { data: profile } = await supabase
      .from("profiles")
      .select("*")
      .eq("id", user.id)
      .single();

    if (profile) {
      document.getElementById("profileName").innerText = profile.name;
      document.getElementById("profileNameDash").innerText = profile.name.split(" ")[0];
      document.getElementById("profileEmail").innerText = user.email;
      document.getElementById("profileCourse").innerText =
        `${profile.course} | ${profile.branch} | ${profile.division}`;
    }

  } catch (err) {
    console.error("Error loading profile:", err);
  }
}

loadUserProfile();

// ================== LOGOUT BUTTON ==================
const logoutBtn = document.getElementById("logoutBtn");

if (logoutBtn) {
  logoutBtn.style.display = "block"; // ensure visibility

  logoutBtn.addEventListener("click", async () => {
    const { error } = await supabase.auth.signOut();
    localStorage.clear();
    sessionStorage.clear();

    if (!error) {
      window.location.href = "auth.html";
    } else {
      console.error("Logout Error:", error.message);
    }
  });
} else {
  console.log("Logout button not found on dashboard.");
}
</script>

<!-- COMPANIES SCRIPT -->
<script>
const companies = {
  cse: [
    { name: "Google", logo: "https://logo.clearbit.com/google.com", link: "https://careers.google.com" },
    { name: "Microsoft", logo: "https://logo.clearbit.com/microsoft.com", link: "https://careers.microsoft.com" },
    { name: "Meta", logo: "https://logo.clearbit.com/meta.com", link: "https://www.metacareers.com" },
    { name: "Amazon", logo: "https://logo.clearbit.com/amazon.com", link: "https://www.amazon.jobs" },
    { name: "Netflix", logo: "https://logo.clearbit.com/netflix.com", link: "https://jobs.netflix.com" },
    { name: "Infosys", logo: "https://logo.clearbit.com/infosys.com", link: "https://careers.infosys.com" },
    { name: "Accenture", logo: "https://logo.clearbit.com/accenture.com", link: "https://www.accenture.com/in-en/careers" },
    { name: "TCS", logo: "https://logo.clearbit.com/tcs.com", link: "https://www.tcs.com/careers" },
    { name: "Deloitte", logo: "https://logo.clearbit.com/deloitte.com", link: "https://www2.deloitte.com/global/en/careers" }
  ],

  entc: [
    { name: "Qualcomm", logo: "https://logo.clearbit.com/qualcomm.com", link: "https://careers.qualcomm.com" },
    { name: "Intel", logo: "https://logo.clearbit.com/intel.com", link: "https://jobs.intel.com" },
    { name: "Nvidia", logo: "https://logo.clearbit.com/nvidia.com", link: "https://nvidia.wd5.myworkdayjobs.com" },
    { name: "Texas Instruments", logo: "https://logo.clearbit.com/ti.com", link: "https://careers.ti.com" },
    { name: "Cisco", logo: "https://logo.clearbit.com/cisco.com", link: "https://jobs.cisco.com" },
    { name: "Ericsson", logo: "https://logo.clearbit.com/ericsson.com", link: "https://jobs.ericsson.com" },
    { name: "Samsung R&D", logo: "https://logo.clearbit.com/samsung.com", link: "https://www.samsung.com/in/about-us/careers" }
  ],

  mech: [
    { name: "Tata Motors", logo: "https://logo.clearbit.com/tatamotors.com", link: "https://www.tatamotors.com/careers" },
    { name: "Mahindra", logo: "https://logo.clearbit.com/mahindra.com", link: "https://www.mahindra.com/careers" },
    { name: "Bajaj", logo: "https://logo.clearbit.com/bajajauto.com", link: "https://careers.bajajauto.com" },
    { name: "Bosch", logo: "https://logo.clearbit.com/bosch.com", link: "https://www.bosch.in/careers" },
    { name: "Siemens", logo: "https://logo.clearbit.com/siemens.com", link: "https://jobs.siemens.com" },
    { name: "Cummins", logo: "https://logo.clearbit.com/cummins.com", link: "https://cummins.jobs" }
  ],


  civil: [
    { name: "L&T Construction", logo: "https://logo.clearbit.com/lntecc.com", link: "https://careers.lntecc.com" },
    { name: "Tata Projects", logo: "https://logo.clearbit.com/tataprojects.com", link: "https://careers.tataprojects.com" },
    { name: "Afcons", logo: "https://logo.clearbit.com/afcons.com", link: "https://www.afcons.com/careers" },
    { name: "GMR", logo: "https://logo.clearbit.com/gmrgroup.in", link: "https://www.gmrgroup.in/careers" },
    { name: "Adani Infra", logo: "https://logo.clearbit.com/adani.com", link: "https://www.adani.com/careers" },
    { name: "NCC", logo: "https://logo.clearbit.com/ncc.com", link: "https://www.ncclimited.com/careers.php" }
  ]
};

function renderCompanies(branch) {
  const container = document.getElementById("companyGrid");
  container.innerHTML = "";
  companies[branch].forEach(c => {
    container.innerHTML += `
      <a href="${c.link}" target="_blank" class="company-card" style="text-decoration:none;">
        <img src="${c.logo}">
        <p>${c.name}</p>
      </a>`;
  });
}

document.querySelectorAll(".branch-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelector(".branch-btn.active").classList.remove("active");
    btn.classList.add("active");
    renderCompanies(btn.dataset.branch);
  });
});

renderCompanies("cse");
</script>

<!-- PARTICLES -->
<script>
particlesJS("particles-js", {
  "particles": {
    "number": { "value": 90, "density": { "enable": true, "value_area": 800 } },
    "color": { "value": "#ffffff" },
    "shape": { "type": "circle" },
    "opacity": { "value": 0.5 },
    "size": { "value": 3 },
    "line_linked": { "enable": true, "distance": 150, "color": "#ffffff", "opacity": 0.4, "width": 1 },
    "move": { "enable": true, "speed": 3 }
  },
  "interactivity": {
    "events": { "onhover": { "enable": true, "mode": "grab" } }
  },
  "retina_detect": true
});
</script>

</body>
</html>
